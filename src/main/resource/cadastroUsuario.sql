CREATE TABLE USUARIO 
(
   ID NUMBER NOT NULL
,  NOME VARCHAR2(200) NOT NULL 
, EMAIL VARCHAR2(45) NOT NULL UNIQUE 
, SENHA VARCHAR2(12) NOT NULL  
, CONSTRAINT CLIENTE_PK PRIMARY KEY 
  (
    ID 
  )
  ENABLE 
);

CREATE SEQUENCE S_USUARIO INCREMENT BY 1 START WITH 1 MAXVALUE 9999999 MINVALUE 1;

CREATE OR REPLACE TRIGGER T_ID_USUARIO
BEFORE INSERT ON USUARIO
  FOR EACH ROW
BEGIN
  IF INSERTING THEN
    IF :NEW.ID IS NULL THEN
      SELECT S_USUARIO.NEXTVAL INTO :NEW.ID FROM DUAL;
     END IF;
   END IF;
END;    


CREATE TABLE TELEFONE 
( 
  ID NUMBER NOT NULL	
, DDD VARCHAR2(3) NOT NULL
, NUMERO VARCHAR2(9) NOT NULL 
, TIPO VARCHAR2(8) NOT NULL
, ID_USUARIO NUMBER NOT NULL 
, CONSTRAINT CONTATO_PK PRIMARY KEY 
  (
    NUMERO 
  )
  ENABLE 
);

ALTER TABLE TELEFONE
ADD CONSTRAINT ID_USUARIO_FK FOREIGN KEY
(
  ID_USUARIO 
)
REFERENCES USUARIO
(
  ID 
)
ENABLE;

CREATE SEQUENCE S_TELEFONE INCREMENT BY 1 START WITH 1 MAXVALUE 9999999 MINVALUE 1;

CREATE OR REPLACE TRIGGER T_ID_TELEFONE
BEFORE INSERT ON TELEFONE
  FOR EACH ROW
BEGIN
  IF INSERTING THEN
    IF :NEW.ID IS NULL THEN
      SELECT S_TELEFONE.NEXTVAL INTO :NEW.ID FROM DUAL;
     END IF;
   END IF;
END;    